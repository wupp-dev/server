import{_ as e,c as o,o as a,N as r}from"./chunks/framework.fe1cbe83.js";const c="/server/assets/docker-group.da03c483.png",q=JSON.parse('{"title":"Lucas vs. Debian & Docker & etc.","description":"","frontmatter":{"title":"Lucas vs. Debian & Docker & etc.","lang":"es-ES"},"headers":[],"relativePath":"relatos/usuario-docker.md","lastUpdated":1680696868000}'),s={name:"relatos/usuario-docker.md"},d=r('<h1 id="lucas-vs-debian-docker-etc" tabindex="-1">Lucas vs. Debian &amp; Docker &amp; etc. <a class="header-anchor" href="#lucas-vs-debian-docker-etc" aria-label="Permalink to &quot;Lucas vs. Debian &amp; Docker &amp; etc.&quot;">​</a></h1><p>De cuando Lucas intentó instalar Docker y Debian decidió que no iba a ir.</p><h2 id="instalacion-de-docker" tabindex="-1">Instalación de Docker <a class="header-anchor" href="#instalacion-de-docker" aria-label="Permalink to &quot;Instalación de Docker&quot;">​</a></h2><p>Esto es simple, fué bien, sin problema.</p><h2 id="vamos-a-crear-el-usuario-docker" tabindex="-1">Vamos a crear el usuario <em>docker</em> <a class="header-anchor" href="#vamos-a-crear-el-usuario-docker" aria-label="Permalink to &quot;Vamos a crear el usuario _docker_&quot;">​</a></h2><p>Aquí Debian dijo: ª.</p><p>Lo primero fué ejecutar <code>sudo adduser -m docker</code>, que es lo que indica cualquier guía para crear un usuario con Debian y otras distros y, hasta donde mi memoria llega, es el comando que había ejecutado yo previamente para esas tareas. Pero esta ejecución fallaba y decía lo siguiente: <code>Unknown option: m</code>. Viendo la ayuda del comando con <code>sudo adduser --help</code> y <code>man adduser</code>, pues no estaba la opción <code>-m</code>, entonces procedí a crearlo sin la opción a ver si funcionaba.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>En un principio, la opción <code>-m</code> en <code>adduser</code> indica al comando que cree la carpeta <em>home</em> del usuario en <em>/home/&lt;username&gt;</em> (o donde se indique con la opción <code>-D</code>).</p></div><p>Al ejecutar <code>sudo adduser docker</code>, el comando fallaba y devolvía el siguiente error: <code>adduser: El grupo &#39;docker&#39; ya existe.</code>. Y pues claro, mi respuesta inicial fué que yo estaba intentando crear un usuario, no un grupo. Me gustaría poder decir que me di cuenta de que al crear un usuario se creaba un grupo con el mismo nombre, pero eso no sería cierto, sino que mi compañero Iván lo descubrió cuando esto ya estaba solucionado. Básicamente mi solución fue crear un usuario con otro nombre, en este caso hice <code>sudo adduser dockeruser</code>, y funcionó.</p><p>Ahora procedí a comprobar la existencia de <em>/home/dockeruser</em> y correcto, existía, y los permisos estaban correctamente configurados así que perfecto. Procedo a ver los usuarios que existen con <code>awk -F: &#39;{ print $1}&#39; /etc/passwd | grep docker</code> y ¡sorpresa!, no aparece el usuario.</p><p>Entonces yo que se me veía muy despierto ese día, vuelvo a buscar por internet y descubro que claro, tenía que asignarle una contraseña al usuario con <code>sudo passwd dockeruser</code> y ya estaba todo bien.</p><div class="tip custom-block"><p class="custom-block-title">RECOMENDACIÓN</p><p>Contraseñas largas para los usuarios por favor y gracias</p></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Normalmente las herramientas base del sistema de Debian y todas estas distros, GNU utils vamos, no suelen cambiar la API, así que realmente desconozco por completo que ha podido ocurrir con <code>adduser</code> para que no me funcionase una opción que se supone que existe.</p></div><h2 id="nos-queda-el-grupo" tabindex="-1">Nos queda el grupo <a class="header-anchor" href="#nos-queda-el-grupo" aria-label="Permalink to &quot;Nos queda el grupo&quot;">​</a></h2><p>Por si crear el usuario no hubiese sido ya difícil, toca gestionar el añadir el usuario al grupo de Docker. Quiero que veáis lo que pone en la documentación oficial de Docker antes de nada:</p><p><img src="'+c+'" alt="sudo groupadd docker"></p><p>Se puede observar que Docker te dice que crees el grupo <em>docker</em>. Pues procedo a crear el grupo docker con <code>sudo groupadd docker</code> y obtengo lo siguiente (después de entender por qué fallaba lo del usuario, esto tiene lógica): <code>groupadd: group &#39;docker&#39; already exists</code>.</p><p>Así que lo dicho, lo que ocurrió es que al <strong>contrario de lo que dice la documentación oficial de Docker</strong>, el grupo <em>docker</em> ya se crea al instalar Docker y por tanto no es necesario crearlo, solo añadir el resultado con <code>sudo usermod -aG docker dockeruser</code>.</p><h2 id="secrets-¿funcionaran-o-no" tabindex="-1">Secrets: ¿funcionarán o no? <a class="header-anchor" href="#secrets-¿funcionaran-o-no" aria-label="Permalink to &quot;Secrets: ¿funcionarán o no?&quot;">​</a></h2><p>De cuando los <code>secret: external: true</code> no fué</p>',20),n=[d];function u(i,t,l,p,m,k){return a(),o("div",null,n)}const h=e(s,[["render",u]]);export{q as __pageData,h as default};
