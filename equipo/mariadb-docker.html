<!DOCTYPE html>
<html lang="es-ES" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Base de datos | WUPP</title>
    <meta name="description" content="Guía del servidor.">
    <meta name="generator" content="VitePress v2.0.0-alpha.15">
    <link rel="preload stylesheet" href="/server/assets/style.BtZV9p0D.css" as="style">
    <link rel="preload stylesheet" href="/server/vp-icons.css" as="style">
    
    <script type="module" src="/server/assets/app.BLtTnA9L.js"></script>
    <link rel="preload" href="/server/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/server/assets/chunks/theme.8hUNz6uP.js">
    <link rel="modulepreload" href="/server/assets/chunks/framework.DtoNLqWc.js">
    <link rel="modulepreload" href="/server/assets/equipo_mariadb-docker.md.B14z3Eda.lean.js">
    <link rel="icon" href="/server/favicon.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-0df3b126><!--[--><!--]--><!--[--><span tabindex="-1" data-v-e4b96250></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-e4b96250>Saltar al contenido</a><!--]--><!----><header class="VPNav" data-v-0df3b126 data-v-473c5363><div class="VPNavBar" data-v-473c5363 data-v-67ba061d><div class="wrapper" data-v-67ba061d><div class="container" data-v-67ba061d><div class="title" data-v-67ba061d><div class="VPNavBarTitle has-sidebar" data-v-67ba061d data-v-7999d162><a class="title" href="/server/" data-v-7999d162><!--[--><!--]--><!--[--><img class="VPImage logo" src="/server/favicon.svg" alt data-v-50a24257><!--]--><span data-v-7999d162>WUPP</span><!--[--><!--]--></a></div></div><div class="content" data-v-67ba061d><div class="content-body" data-v-67ba061d><!--[--><!--]--><div class="VPNavBarSearch search" data-v-67ba061d><!--[--><!----><div id="local-search"><button type="button" aria-label="Buscar" aria-keyshortcuts="/ control+k meta+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><span class="vpi-search DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Buscar</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key"></kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-67ba061d data-v-38f2c859><span id="main-nav-aria-label" class="visually-hidden" data-v-38f2c859> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/server/" tabindex="0" data-v-38f2c859 data-v-10b58a00><!--[--><span data-v-10b58a00>Inicio</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/server/nosotros" tabindex="0" data-v-38f2c859 data-v-10b58a00><!--[--><span data-v-10b58a00>Nosotros</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/server/equipo/historia" tabindex="0" data-v-38f2c859 data-v-10b58a00><!--[--><span data-v-10b58a00>Guía del servidor</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://github.com/wupp-dev/server/tree/main/fs" target="_blank" rel="noreferrer" tabindex="0" data-v-38f2c859 data-v-10b58a00><!--[--><span data-v-10b58a00>Archivos de configuración</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-67ba061d data-v-4f29e3f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-4f29e3f0 data-v-12f8bd23 data-v-d3c87a43><span class="check" data-v-d3c87a43><span class="icon" data-v-d3c87a43><!--[--><span class="vpi-sun sun" data-v-12f8bd23></span><span class="vpi-moon moon" data-v-12f8bd23></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-67ba061d data-v-d313260a data-v-d12a472e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/wupp-dev/server/" aria-label="Repositorio GitHub de este proyecto" target="_blank" rel="me noopener" data-v-d12a472e data-v-7425dcfe><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-67ba061d data-v-c3d7f22d data-v-002ae00f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-002ae00f><span class="vpi-more-horizontal icon" data-v-002ae00f></span></button><div class="menu" data-v-002ae00f><div class="VPMenu" data-v-002ae00f data-v-681df21c><!----><!--[--><!--[--><!----><div class="group" data-v-c3d7f22d><div class="item appearance" data-v-c3d7f22d><p class="label" data-v-c3d7f22d>Apariencia</p><div class="appearance-action" data-v-c3d7f22d><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-c3d7f22d data-v-12f8bd23 data-v-d3c87a43><span class="check" data-v-d3c87a43><span class="icon" data-v-d3c87a43><!--[--><span class="vpi-sun sun" data-v-12f8bd23></span><span class="vpi-moon moon" data-v-12f8bd23></span><!--]--></span></span></button></div></div></div><div class="group" data-v-c3d7f22d><div class="item social-links" data-v-c3d7f22d><div class="VPSocialLinks social-links-list" data-v-c3d7f22d data-v-d12a472e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/wupp-dev/server/" aria-label="Repositorio GitHub de este proyecto" target="_blank" rel="me noopener" data-v-d12a472e data-v-7425dcfe><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-67ba061d data-v-c39e5934><span class="container" data-v-c39e5934><span class="top" data-v-c39e5934></span><span class="middle" data-v-c39e5934></span><span class="bottom" data-v-c39e5934></span></span></button></div></div></div></div><div class="divider" data-v-67ba061d><div class="divider-line" data-v-67ba061d></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-0df3b126 data-v-af343012><div class="container" data-v-af343012><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-af343012><span class="vpi-align-left menu-icon" data-v-af343012></span><span class="menu-text" data-v-af343012>Menú</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-af343012 data-v-e499510b><button data-v-e499510b>Volver arriba</button><!----></div></div></div><aside class="VPSidebar" data-v-0df3b126 data-v-0bcf3316><div class="curtain" data-v-0bcf3316></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-0bcf3316><span class="visually-hidden" id="sidebar-aria-label" data-v-0bcf3316> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-42831e0c><section class="VPSidebarItem level-0 has-active" data-v-42831e0c data-v-7114ee1f><div class="item" role="button" tabindex="0" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><h2 class="text" data-v-7114ee1f>Equipo</h2><!----></div><div class="items" data-v-7114ee1f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/equipo/historia" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Historia</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/equipo/hardware" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Hardware</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/equipo/sistema-encriptado" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Instalación del SO encriptado</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/equipo/router-dominio" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Router y dominio</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/equipo/gestion-remota" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Gestión remota</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/equipo/nginx" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Servidor web</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/equipo/docker" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Docker</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/equipo/mariadb-docker" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Base de datos</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/equipo/monitorizacion" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Monitorización</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/equipo/conectando-servidores" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Conectando servidores</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/equipo/copias-seguridad" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Copias de seguridad</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-42831e0c><section class="VPSidebarItem level-0" data-v-42831e0c data-v-7114ee1f><div class="item" role="button" tabindex="0" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><h2 class="text" data-v-7114ee1f>Servicios</h2><!----></div><div class="items" data-v-7114ee1f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/servicios/nextcloud" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Nextcloud - Almacenamiento</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/servicios/mailserver" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Docker Mailserver - Correo electrónico</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/servicios/minio" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>MinIO - Almacenamiento S3</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/servicios/minecraft" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Minecraft con AMP</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/servicios/navidrome" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Navidrome - Streaming de música</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-42831e0c><section class="VPSidebarItem level-0" data-v-42831e0c data-v-7114ee1f><div class="item" role="button" tabindex="0" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><h2 class="text" data-v-7114ee1f>Relatos</h2><!----></div><div class="items" data-v-7114ee1f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/relatos/bloqueo-ssh" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Bloqueo de SSH</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/relatos/docker" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Docker y sus cosas</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/relatos/dns-initramfs" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Resolución de dominios en initramfs</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/relatos/tunel-ssh-ulp" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Túnel SSH en la UGR LAN Party de 2024</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/relatos/moviendo-var" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>Moviendo /var a otro disco</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7114ee1f data-v-7114ee1f><div class="item" data-v-7114ee1f><div class="indicator" data-v-7114ee1f></div><a class="VPLink link link" href="/server/relatos/dyndns-namecheap" data-v-7114ee1f><!--[--><p class="text" data-v-7114ee1f>DynDNS con Namecheap</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-0df3b126 data-v-0aaaad75><div class="VPDoc has-sidebar has-aside" data-v-0aaaad75 data-v-6fb275ed><!--[--><!--]--><div class="container" data-v-6fb275ed><div class="aside" data-v-6fb275ed><div class="aside-curtain" data-v-6fb275ed></div><div class="aside-container" data-v-6fb275ed><div class="aside-content" data-v-6fb275ed><div class="VPDocAside" data-v-6fb275ed data-v-15fffdd4><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-15fffdd4 data-v-67194202><div class="content" data-v-67194202><div class="outline-marker" data-v-67194202></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-67194202>En esta página</div><ul class="VPDocOutlineItem root" data-v-67194202 data-v-b6c34609><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-15fffdd4></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6fb275ed><div class="content-container" data-v-6fb275ed><!--[--><!--]--><main class="main" data-v-6fb275ed><div style="position:relative;" class="vp-doc _server_equipo_mariadb-docker external-link-icon-enabled" data-v-6fb275ed><div><h1 id="configurando-mariadb-con-docker" tabindex="-1">Configurando MariaDB con Docker <a class="header-anchor" href="#configurando-mariadb-con-docker" aria-label="Permalink to “Configurando MariaDB con Docker”">​</a></h1><div class="warning custom-block"><p class="custom-block-title">ATENCIÓN</p><p>Esta página está desactualizada y pendiente de revisión.</p></div><p>Para empezar a ver cómo funciona el <code>docker-compose.yaml</code> y probar docker, vamos a configurar un contenedor de MariaDB, que servirá como base de datos para los diferentes servicios que soporten MySQL.</p><h2 id="contenido-de-docker-compose-yaml" tabindex="-1">Contenido de <code>docker-compose.yaml</code> <a class="header-anchor" href="#contenido-de-docker-compose-yaml" aria-label="Permalink to “Contenido de docker-compose.yaml”">​</a></h2><p>Aquí está el contenido a añadir al <code>docker-compose.yaml</code>:</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">secrets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  mariadb_root_password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    external</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  nextcloud_db_user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    external</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  nextcloud_db_password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    external</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mariadb:10.5</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./db:/var/lib/mysql</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    secrets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mariadb_root_password</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nextcloud_db_user</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nextcloud_db_password</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MARIADB_ROOT_PASSWORD_FILE=/run/secrets/mariadb_root_password</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MARIADB_USER_FILE=/run/secrets/nextcloud_db_user</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MARIADB_PASSWORD_FILE=/run/secrets/nextcloud_db_password</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MARIADB_DATABASE=${NEXTCLOUD_DB_NAME:?nextcloud database name required}</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">¿POR QUÉ APARECE NEXTCLOUD?</p><p>La imagen del contenedor Docker de MariaDB nos permite crear una base de datos al iniciar el contenedor por primera vez. En este caso, como uno de los servicios principales del servidor es Nextcloud, hemos configurado aquí el contenedor para que cree la base de datos y el usuario para Nextcloud al iniciarse, y para más bases de datos las crearemos posteriormente antes de iniciar el otro servicio.</p></div><h2 id="gestion-de-secretos-secrets" tabindex="-1">Gestión de secretos: <code>secrets</code> <a class="header-anchor" href="#gestion-de-secretos-secrets" aria-label="Permalink to “Gestión de secretos: secrets”">​</a></h2><p>Esta sección del <code>docker-compose.yaml</code> nos permite declarar los llamados <em>secrets</em> (o secretos por su traducción al castellano). Estos son cadenas de texto que se crean con <code>docker secrets</code> o a través de un archivo, que Docker gestiona de una manera segura y nos sirve para reemplazar las variables de entorno que contengan datos más sensibles como contraseñas. Aunque estos secretos se pueden crear a través de un archivo indicándolo en el propio <code>docker-compose.yaml</code>, realizarlo de tal forma requiere tener la contraseña en texto plano en el sistema, por tanto vamos a crear los secretos a través de la terminal.</p><p>En el archivo <code>docker-compose.yaml</code> tenemos que declarar el nombre de los <em>secrets</em> que vamos a usar en <code>secrets</code>. Estos se declaran indicando su nombre como miembro de <code>secrets</code>, i.e. añadiendo el nombre indentado debajo de <code>secrets</code> como se puede ver anteriormente y, dado que los vamos a crear manualmente con la CLI de Docker, tenemos que indicar <code>external: true</code> para cada uno.</p><div class="warning custom-block"><p class="custom-block-title">IMPORTANTE</p><p>La versión que se indica con la clave <code>version</code> en el archivo ha de ser 3 o superior para que los <em>secrets</em> funcionen</p></div><p>Procedamos ahora a crear los diferentes <em>secrets</em> que se necesitan. En los siguientes comandos, sustituye el texto entre <code>&lt;&gt;</code> (e.g. <code>&lt;root_password&gt;</code>) con lo que desees (que recomendamos que sea generado aleatoriamente) y guárdalo en un sitio seguro y que no vayas a perder:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&lt;root_password&gt;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> secret</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mariadb_root_password</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&lt;nextcloud_password&gt;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> secret</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nextcloud_db_password</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&lt;nextcloud_user&gt;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> secret</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nextcloud_db_user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">SUGERENCIA</p><p>Dado que estas contraseñas permiten acceder a todos los datos de Nextcloud y la de <em>root</em> a <strong>TODOS los datos de TODAS las bases de datos</strong>, te recomendamos que sean bastante seguras, de más de 20 caracteres mínimo. El usuario de la base de datos también es recomendable generarlo aleatoriamente para así proveer más seguridad evitando que si alguien gana acceso a la contraseña pueda acceder</p></div><h2 id="variables-de-entorno" tabindex="-1">Variables de entorno <a class="header-anchor" href="#variables-de-entorno" aria-label="Permalink to “Variables de entorno”">​</a></h2><p>A lo largo del <code>docker-compose.yaml</code> vamos a utilizar múltiples variables de entorno para interpolar datos que no resultan tan privados, como el nombre de la base de datos. Las variables de entorno se cargan directamente de un archivo <code>.env</code> que se sitúe junto al <code>docker-compose.yaml</code>, aunque puede personalizarse para cada servicio usando la opción <code>env_file</code>. En nuestro caso, tenemos un <a href="https://github.com/ComicIvans/server/blob/main/home/dockeruser/docker-compose.yml" target="_blank" rel="noreferrer">archivo de entorno de ejemplo en el repositorio</a>. Para proseguir, vamos a descargar este archivo y renombrarlo a <code>.env</code>:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sitúate donde tengas el archivo docker-compose, que debería de ser /home/&lt;usuario-docker&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://raw.githubusercontent.com/ComicIvans/server/main/home/dockeruser/.env.example</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">RECORDATORIO IMPORTANTE</p><p>El archivo <code>.env.example</code> es de ejemplo y público para cualquiera, así que antes de proseguir edita el archivo con tu editor favorito para que no tenga los mismos valores que el de ejemplo.</p></div><p>En la siguiente sección indicaremos como usar estas variables de entorno en los diferentes servicios.</p><div class="info custom-block"><p class="custom-block-title">MÁS INFORMACIÓN</p><p>Si te has quedado con la duda de por qué usamos <em>secrets</em> y no variables de entorno, puedes leer más en <a href="https://blog.diogomonica.com//2017/03/27/why-you-shouldnt-use-env-variables-for-secret-data/" target="_blank" rel="noreferrer">este artículo</a> de la antigua coordinadora de seguridad en Docker.</p></div><h2 id="el-contenedor-en-si-services-db" tabindex="-1">El contenedor en sí: <code>services</code> &gt; <code>db</code> <a class="header-anchor" href="#el-contenedor-en-si-services-db" aria-label="Permalink to “El contenedor en sí: services &gt; db”">​</a></h2><p><em><strong>WIP</strong></em></p><h2 id="gestionando-mariadb-con-adminer" tabindex="-1">Gestionando MariaDB con Adminer <a class="header-anchor" href="#gestionando-mariadb-con-adminer" aria-label="Permalink to “Gestionando MariaDB con Adminer”">​</a></h2><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  adminer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">adminer</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8088:8080</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-6fb275ed data-v-0b58e045><!--[--><!--]--><div class="edit-info" data-v-0b58e045><!----><div class="last-updated" data-v-0b58e045><p class="VPLastUpdated" data-v-0b58e045 data-v-0e233eb8>Actualizado por última vez: <time datetime="2026-01-03T22:31:21.000Z" data-v-0e233eb8></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-0b58e045><span class="visually-hidden" id="doc-footer-aria-label" data-v-0b58e045>Pager</span><div class="pager" data-v-0b58e045><a class="VPLink link pager-link prev" href="/server/equipo/docker" data-v-0b58e045><!--[--><span class="desc" data-v-0b58e045>Página anterior</span><span class="title" data-v-0b58e045>Docker</span><!--]--></a></div><div class="pager" data-v-0b58e045><a class="VPLink link pager-link next" href="/server/equipo/monitorizacion" data-v-0b58e045><!--[--><span class="desc" data-v-0b58e045>Página siguiente</span><span class="title" data-v-0b58e045>Monitorización</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-0df3b126 data-v-13bee918><div class="container" data-v-13bee918><p class="message" data-v-13bee918>Distribuido bajo la licencia CC BY.</p><p class="copyright" data-v-13bee918>Copyright © 2022-presente Lucas de Uña Ocampo e Iván Salido Cobo</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"equipo_conectando-servidores.md\":\"e6mi0OfL\",\"equipo_copias-seguridad.md\":\"DzceBFFR\",\"equipo_docker.md\":\"DABdRKd_\",\"equipo_gestion-remota.md\":\"BVEQ1oui\",\"equipo_hardware.md\":\"CQOmlM-O\",\"equipo_historia.md\":\"DH3sXH4r\",\"equipo_index.md\":\"CL0XUfWv\",\"equipo_mariadb-docker.md\":\"B14z3Eda\",\"equipo_monitorizacion.md\":\"tDzNCahZ\",\"equipo_nginx.md\":\"3UDjD23m\",\"equipo_router-dominio.md\":\"D-IVzafr\",\"equipo_sistema-encriptado.md\":\"BtMX1CXF\",\"index.md\":\"Iq7BN85I\",\"nosotros.md\":\"BuNbdF9E\",\"relatos_bloqueo-ssh.md\":\"BSfBDXK7\",\"relatos_dns-initramfs.md\":\"B2JBoXHr\",\"relatos_docker.md\":\"CevIpoRQ\",\"relatos_dyndns-namecheap.md\":\"D9Z8NGVo\",\"relatos_index.md\":\"pibKAzNh\",\"relatos_moviendo-var.md\":\"BAnFlzOJ\",\"relatos_tunel-ssh-ulp.md\":\"YgvZMpUd\",\"servicios_index.md\":\"Bp0pzqYY\",\"servicios_mailserver.md\":\"DHQkyvbc\",\"servicios_minecraft.md\":\"C4W6SVE3\",\"servicios_minio.md\":\"BwB_77OO\",\"servicios_navidrome.md\":\"BFiWKWSU\",\"servicios_nextcloud.md\":\"iBEbz351\",\"shared_servicios_puertos.md\":\"PIRGl2yP\",\"shared_servicios_recordatorios-nginx.md\":\"DcakjFdo\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"es-ES\",\"dir\":\"ltr\",\"title\":\"WUPP\",\"description\":\"Guía del servidor.\",\"base\":\"/server/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/favicon.svg\",\"outlineTitle\":\"En esta página\",\"nav\":[{\"text\":\"Inicio\",\"link\":\"/\",\"activeMatch\":\"\"},{\"text\":\"Nosotros\",\"link\":\"/nosotros\",\"activeMatch\":\"^/nosotros$\"},{\"text\":\"Guía del servidor\",\"link\":\"/equipo/historia\",\"activeMatch\":\"^/(?!$|nosotros$)\"},{\"text\":\"Archivos de configuración\",\"link\":\"https://github.com/wupp-dev/server/tree/main/fs\",\"target\":\"_blank\"}],\"sidebar\":[{\"text\":\"Equipo\",\"items\":[{\"text\":\"Historia\",\"link\":\"/equipo/historia\"},{\"text\":\"Hardware\",\"link\":\"/equipo/hardware\"},{\"text\":\"Instalación del SO encriptado\",\"link\":\"/equipo/sistema-encriptado\"},{\"text\":\"Router y dominio\",\"link\":\"/equipo/router-dominio\"},{\"text\":\"Gestión remota\",\"link\":\"/equipo/gestion-remota\"},{\"text\":\"Servidor web\",\"link\":\"/equipo/nginx\"},{\"text\":\"Docker\",\"link\":\"/equipo/docker\"},{\"text\":\"Base de datos\",\"link\":\"/equipo/mariadb-docker\"},{\"text\":\"Monitorización\",\"link\":\"/equipo/monitorizacion\"},{\"text\":\"Conectando servidores\",\"link\":\"/equipo/conectando-servidores\"},{\"text\":\"Copias de seguridad\",\"link\":\"/equipo/copias-seguridad\"}]},{\"text\":\"Servicios\",\"items\":[{\"text\":\"Nextcloud - Almacenamiento\",\"link\":\"/servicios/nextcloud\"},{\"text\":\"Docker Mailserver - Correo electrónico\",\"link\":\"/servicios/mailserver\"},{\"text\":\"MinIO - Almacenamiento S3\",\"link\":\"/servicios/minio\"},{\"text\":\"Minecraft con AMP\",\"link\":\"/servicios/minecraft\"},{\"text\":\"Navidrome - Streaming de música\",\"link\":\"/servicios/navidrome\"}]},{\"text\":\"Relatos\",\"items\":[{\"text\":\"Bloqueo de SSH\",\"link\":\"/relatos/bloqueo-ssh\"},{\"text\":\"Docker y sus cosas\",\"link\":\"/relatos/docker\"},{\"text\":\"Resolución de dominios en initramfs\",\"link\":\"/relatos/dns-initramfs\"},{\"text\":\"Túnel SSH en la UGR LAN Party de 2024\",\"link\":\"/relatos/tunel-ssh-ulp\"},{\"text\":\"Moviendo /var a otro disco\",\"link\":\"/relatos/moviendo-var\"},{\"text\":\"DynDNS con Namecheap\",\"link\":\"/relatos/dyndns-namecheap\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/wupp-dev/server/\",\"ariaLabel\":\"Repositorio GitHub de este proyecto\"}],\"footer\":{\"message\":\"Distribuido bajo la licencia CC BY.\",\"copyright\":\"Copyright © 2022-presente Lucas de Uña Ocampo e Iván Salido Cobo\"},\"notFound\":{\"title\":\"Página no encontrada\",\"quote\":\"Caminante, no hay camino, se hace camino al andar.\",\"linkLabel\":\"Volver al inicio\",\"linkText\":\"Volver al inicio\"},\"lastUpdated\":{\"text\":\"Actualizado por última vez\"},\"docFooter\":{\"prev\":\"Página anterior\",\"next\":\"Página siguiente\"},\"darkModeSwitchLabel\":\"Apariencia\",\"lightModeSwitchTitle\":\"Cambiar a modo claro\",\"darkModeSwitchTitle\":\"Cambiar a modo oscuro\",\"sidebarMenuLabel\":\"Menú\",\"returnToTopLabel\":\"Volver arriba\",\"skipToContentLabel\":\"Saltar al contenido\",\"externalLinkIcon\":true,\"search\":{\"provider\":\"local\",\"options\":{\"translations\":{\"button\":{\"buttonText\":\"Buscar\",\"buttonAriaLabel\":\"Buscar\"},\"modal\":{\"displayDetails\":\"Mostrar detalles\",\"resetButtonTitle\":\"Restablecer\",\"backButtonTitle\":\"Volver\",\"noResultsText\":\"No se han encontrado resultados\",\"footer\":{\"selectText\":\"Seleccionar\",\"selectKeyAriaLabel\":\"Tecla Enter\",\"navigateText\":\"Navegar\",\"navigateUpKeyAriaLabel\":\"Tecla flecha arriba\",\"navigateDownKeyAriaLabel\":\"Tecla flecha abajo\",\"closeText\":\"Cerrar\",\"closeKeyAriaLabel\":\"Tecla Escape\"}}}}}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true,\"additionalConfig\":{}}");</script>
    
  </body>
</html>